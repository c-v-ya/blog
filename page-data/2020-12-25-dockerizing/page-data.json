{"componentChunkName":"component---src-templates-post-template-js","path":"/2020-12-25-dockerizing","result":{"data":{"markdownRemark":{"frontmatter":{"date":"December 25, 2020","title":"Dockerizing stuff you need","path":"/2020-12-25-dockerizing","description":"","tags":"docker"},"html":"<p><em>Photo by</em> <a href=\"https://unsplash.com/@exdigy?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\"><em>Dominik LÃ¼ckmann</em></a> <em>on</em> <a href=\"https://unsplash.com/?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\"><em>Unsplash</em></a></p>\n<p>When we develop something we all need to use some services such as PostgreSQL, Redis, RabbitMQ and many-many others. But I don't like the idea of installing each and every one of them on my local machine. So the idea of dockerizing everything looks very appealing.</p>\n<p>In this article I'll show how to deploy three mentioned services locally with docker. And, as a bonus, easy way of configuring and monitoring our containers park via Portainer.</p>\n<h1>Bonus first</h1>\n<p>Portainer is such a great and powerful tool that I just love! Let's set it up and ease our next steps.</p>\n<p>You need to create a volume with a simple terminal command</p>\n\n        <deckgo-highlight-code   theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">$ docker volume create portainer_data</code>\n        </deckgo-highlight-code>\n      \n<p>and deploy Portainer</p>\n\n        <deckgo-highlight-code   theme=\"monokai\" line-numbers=\"true\" >\n          <code slot=\"code\">$ docker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce</code>\n        </deckgo-highlight-code>\n      \n<p>All of this you can find in <a href=\"https://documentation.portainer.io/v2.0/deploy/linux/#deploy-portainer-in-docker\">deploy section</a> on the official documentation.</p>\n<p>Then finish the initial setup. Again, everything is described in the <a href=\"https://documentation.portainer.io/v2.0/deploy/initial/\">docs</a></p>\n<p>After it's done you can navigate to <a href=\"http://localhost:9000\">localhost:9000</a> and see the Portainer dashboard.</p>\n<p>Now you can monitor your containers, attach to them, check logs, see and remove unused images and volumes, and do everything you could do from terminal. But you don't need to google or remember those lengthy commands.</p>\n<p>Allright, let's go!</p>\n<h1>PostgreSQL</h1>\n<p>As we need to have a persistent storage for our DB let's create a volume. Go to \"Volumes\" tab in Portainer and push that \"Add volume\" button. Give it a name, e.g. <code class=\"language-text\">pg_data</code> and hit \"Create the volume\".</p>\n<p>Then go to \"Containers\" tab and smash \"Add container\" button.\nSet <code class=\"language-text\">Name: pg</code>, <code class=\"language-text\">Image: postgres:latest</code>, on \"Manual network port publishing\" click plus sign and enter <code class=\"language-text\">5432</code> for both \"host\" and \"container\".</p>\n<p>Next in \"Advanced container settings\" section leave everything as is on \"Command and logging tab\". Move to \"Volumes\" tab, hit plus sign and map <code class=\"language-text\">/var/lib/postgresql/data</code> to our <code class=\"language-text\">pg_data</code> volume. After that to the \"Env\" tab. Set <code class=\"language-text\">POSTGRES_PASSWORD</code> to, well, root password for the database. Let's say it will be <code class=\"language-text\">password</code>. I also like to set <code class=\"language-text\">unless stopped</code> on \"Restart policy\" tab. Now we are ready to smash that \"Deploy the container\" button above our advanced settings section.</p>\n<p>Where do I get those variables and values? Docker Hub! Just open the service page and it's all there.</p>\n<p>Also you can do everything by hand, but I don't remember how to create a volume with a custom name and map that to a container.</p>\n<p>And we can now connect to Postgres via <code class=\"language-text\">localhost:5432</code> as <code class=\"language-text\">postgres</code> user and <code class=\"language-text\">password</code> password!</p>\n<h1>Redis</h1>\n<p>If Postgres was quite handful Redis is much easier. The steps are similar.</p>\n<ol>\n<li>Create volume</li>\n<li>\n<p>Create container</p>\n<ul>\n<li>with port binding <code class=\"language-text\">6379:6379</code>;</li>\n<li>map created volume to <code class=\"language-text\">/data</code>;</li>\n<li>and, optionally, set restart policy.</li>\n</ul>\n</li>\n</ol>\n<p>Boom, done!</p>\n<h1>RabbitMQ</h1>\n<p>Next in line is Rabbit. It's so easy I don't even want to repeat ðŸ˜€</p>\n<ol>\n<li>Create volume</li>\n<li>\n<p>Create container</p>\n<ul>\n<li>with port bindings <code class=\"language-text\">5672:5672</code> and <code class=\"language-text\">15672:15672</code> for management;</li>\n<li>map created volume to <code class=\"language-text\">/var/lib/rabbitmq</code>;</li>\n<li>and, if you want, set restart policy.</li>\n</ul>\n</li>\n</ol>\n<p>And again, done! ðŸŽ‰</p>\n<h1>Summary</h1>\n<p>When using docker you can free yourself from the need to install every service you need. Not to mention if you need different versions of the same thing.</p>\n<p>Hope this will ease your struggles with containers (if any) and you'll be able to focus on writing quality code!</p>","timeToRead":3},"file":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABeyPUdIlK/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECAxIR/9oACAEBAAEFAnpy1fonNJpsnGTiT//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAQADAQAAAAAAAAAAAAAAAAABETFR/9oACAEBAAY/AnF01syx/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERIXFBYf/aAAgBAQABPyHAovTXVEijvqLCxfgpr6GKQ//aAAwDAQACAAMAAAAQZO//xAAZEQADAAMAAAAAAAAAAAAAAAAAASERkfD/2gAIAQMBAT8QddXaMH//xAAYEQACAwAAAAAAAAAAAAAAAAAAAREhMf/aAAgBAgEBPxBVjJP/xAAfEAEAAgEDBQAAAAAAAAAAAAABABEhMUFxYYGRofD/2gAIAQEAAT8QKmilc2CK1r9iU2vUAUvEOvYhm/EymXu44KurXiCAAOWf/9k=","aspectRatio":1.5533980582524272,"src":"/blog/static/b7bf7229c21b650f599a9cc86a64babf/68386/dominik-luckmann-SInhLTQouEk-unsplash.jpg","srcSet":"/blog/static/b7bf7229c21b650f599a9cc86a64babf/474e4/dominik-luckmann-SInhLTQouEk-unsplash.jpg 320w,\n/blog/static/b7bf7229c21b650f599a9cc86a64babf/3bf7d/dominik-luckmann-SInhLTQouEk-unsplash.jpg 640w,\n/blog/static/b7bf7229c21b650f599a9cc86a64babf/68386/dominik-luckmann-SInhLTQouEk-unsplash.jpg 1280w,\n/blog/static/b7bf7229c21b650f599a9cc86a64babf/097fa/dominik-luckmann-SInhLTQouEk-unsplash.jpg 1920w","sizes":"(max-width: 1280px) 100vw, 1280px"}}}},"pageContext":{"imagePath":"dominik-luckmann-SInhLTQouEk-unsplash.jpg","prev":null,"next":{"frontmatter":{"path":"/2020-10-08-dualboot","title":"About dualboot Arch + Win","date":"October 08, 2020","author":"Constantine Yarushkin","description":"Things to do after installing OSes","image":"avel-chuklanov-ZEiqbaQhmvE-unsplash.jpg","tags":"arch, win, os, dualboot"}}}}}